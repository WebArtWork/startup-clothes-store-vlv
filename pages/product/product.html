<div class="container product__container">
	<section class="product">
		<div class="product__img">
			<div id="carouselExample" class="carousel slide">
				<div class="carousel-inner">
				  <div class="carousel-item active">
					<img src="{{{product.thumb}}}" class="d-block w-100" alt="...">
				  </div>
				  {% for thumb in product.thumbs %}
				  <div class="carousel-item">
					<img src="{{{thumb}}}" class="d-block w-100" alt="...">
				  </div>
				  {% endfor %}
				</div>
				<button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
				  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
				  <span class="visually-hidden">Previous</span>
				</button>
				<button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
				  <span class="carousel-control-next-icon" aria-hidden="true"></span>
				  <span class="visually-hidden">Next</span>
				</button>
			  </div>
		</div>
		<div class="product-info">
			<div class="product-info__title">{{{product.name}}}</div>
			<div class="product-info__price">
				{{{product.price}}}&nbsp;<span>{{{currency}}}</span>
			</div>
			<div class="product-info__cart">
				<button id="addToCart" type="button" class="btn product-info__cart-btn">
					Додати у кошик
				</button>
				<button id="buyNow" type="button" class="btn product-info__cart-btn">
					Купити зараз
				</button>
			</div>
			<script type="module">
				import Dom from "/api/wjst/dom";
				import Order from "/api/wjst/order";

				const toggleProduct = async (quantity = 1) => {
					const product = "{{{product.id}}}";
					await Order.toggleProduct(product, quantity);
					if (await Order.hasProduct(product)) {
						Dom.element("addToCart").innerHTML = "Забрати з кошика";
						Dom.element("addToCart").style.backgroundColor = "#6cc4cc";
					} else {
						Dom.element("addToCart").innerHTML = "Додати у кошик";
						Dom.element("addToCart").style.backgroundColor = "black";
					}
					Dom.element("cart").innerHTML = Dom.template('cart', {
						counter: Order.order.products.length
					});
				};

				Dom.click("addToCart", () => toggleProduct(1));

				Dom.click("buyNow", async () => {
					const product = "{{{product.id}}}";
					await toggleProduct();
					window.location.href = '/cart';
				});
			</script>
			{% if product.description %}
			<div class="product-info__cart-text">Подробиці:</div>
			<div class="product-info__cart">{{{product.description}}}</div>
			{% endif %}
		</div>
	</section>
</div>