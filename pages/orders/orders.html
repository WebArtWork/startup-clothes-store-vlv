<div class="container">
    <div class="row">
        <div class="col-md-4">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link disabled" aria-disabled="true">Портал</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/orders"><img
                            src="/vlv/img/icons/order-svgrepo-com.png" width="20px"> Мої замовлення</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/orders"><img
                            src="/vlv/img/icons/protect-svgrepo-com.png" width="20px"> Налаштування</a>
                </li>
            </ul>
        </div>
        <div class="col-md-4">
            <h1>Список замовлень</h1>
            <div class="orders_list">
                <div>
                    <div>
                        <div>ID</div>
                        <div>Сумарна ціна</div>
                        <div>Статус</div>
                        <div>Продукти</div>
                    </div>
                    <div id="orders">

                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<div id="template-orders" style="display: none;">
    <div>{id}</div>
    <div>{total}</div>
    <div>{status}</div>
    <div>{name}</div>
</div>

<script type="module">
    import Dom from "/api/wjst/dom";
    import Order from "/api/wjst/order";
    import Event from "/api/wjst/event";
    import Http from '/api/wjst/http';
    const resp = await Http.post('/api/user/fetchme', {})
    const orders = await Order.populated();
    for (const order of orders) {
        Dom.add('orders', Dom.template('orders', {
            currency: order.currency,
            price: order.price,
            quantity: order.product.quantity,
            status: order.status,
            id: order._id,
            total: order.product.quantity * order.product.price,
            name: order.product.name
        }));
    };
</script>