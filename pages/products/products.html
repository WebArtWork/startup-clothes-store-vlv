<!-- <div class="container">
  <div class="product-search">
    <form>
      <input type="text" placeholder="Шукати товари" />
      <button type="submit">
        <svg fill="#000000" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0,0,256,256"><g fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="translate(0,256) scale(0.26667,0.26667)"><path d="M784,-120l-252,-252c-20,16 -43,28.66667 -69,38c-26,9.33333 -53.66667,14 -83,14c-72.66667,0 -134.16667,-25.16667 -184.5,-75.5c-50.33333,-50.33333 -75.5,-111.83333 -75.5,-184.5c0,-72.66667 25.16667,-134.16667 75.5,-184.5c50.33333,-50.33333 111.83333,-75.5 184.5,-75.5c72.66667,0 134.16667,25.16667 184.5,75.5c50.33333,50.33333 75.5,111.83333 75.5,184.5c0,29.33333 -4.66667,57 -14,83c-9.33333,26 -22,49 -38,69l252,252zM380,-400c50,0 92.5,-17.5 127.5,-52.5c35,-35 52.5,-77.5 52.5,-127.5c0,-50 -17.5,-92.5 -52.5,-127.5c-35,-35 -77.5,-52.5 -127.5,-52.5c-50,0 -92.5,17.5 -127.5,52.5c-35,35 -52.5,77.5 -52.5,127.5c0,50 17.5,92.5 52.5,127.5c35,35 77.5,52.5 127.5,52.5z"></path></g></g></svg>
      </button>
    </form>
  </div>
</div> -->

<!-- {% for tag in tags %}
<div class="container cloth-container">
  <h2 class="cloth__title">{{{tag.name}}}</h2>
  <div class="cloth__list">
    {% for product in tag.products %}
    <a href="/product" class="cloth__item cloth__item-products" data-modal-id="modal">
      <img src="{{{product.thumb}}}" alt="{{{product.name}}}" />
      <div class="cloth__item-title">{{{product.name}}}</div>
      <div class="cloth__item-price">{{{product.price}}} <span>{{{currency}}}</span></div>
    </a>
    {% endfor %}
  </div>
</div>
{% endfor %} -->
<div class="container cloth-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar">
        <h3>Фільтрувати за</h3>
        <ul>
          <li>
            <a href="#" class="toggle-category" id="gender">Стать</a>
            <ul>
              <li>
                <label>
                  <input type="checkbox" name="boy" class="filter-checkbox" data-category="gender">
                  Хлопчики
                </label>
              </li>
              <li>
                <label>
                  <input type="checkbox" name="girl" class="filter-checkbox" data-category="gender">
                  Дівчатка
                </label>
              </li>
              <li>
                <label>
                  <input type="checkbox" name="unisex" class="filter-checkbox" data-category="gender">
                  Унісекс
                </label>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-md-8">
      <div class="cloth__list">
        {% for product in products %}
        <a href="/product/{{{product._id|string}}}" class="cloth__item cloth__item-products" data-modal-id="modal">
          <img src="{{{product.thumb}}}" alt="{{{product.name}}}" />
          <div class="cloth__item-title">{{{product.name}}}</div>
          <div class="cloth__item-price">{{{product.price}}} <span>{{{currency}}}</span></div>
        </a>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var toggles = document.querySelectorAll('.toggle-category');
    toggles.forEach(function (toggle) {
      toggle.addEventListener('click', function (event) {
        event.preventDefault();
        var parentLi = this.parentElement;
        if (parentLi.classList.contains('active')) {
          parentLi.classList.remove('active');
        } else {
          parentLi.classList.add('active');
        }
      });
    });

    document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
      checkbox.addEventListener('change', function () {
        updateFilters();
      });
    });

    function updateFilters() {
      let url = new URL(window.location.href);
      let params = new URLSearchParams(url.search);
      
      // Clear existing filter parameters
      const filterCategories = document.querySelectorAll('.toggle-category');
      filterCategories.forEach(category => {
        params.delete(category.id);
      });

      // Collect filter values
      const filterValues = {};

      document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
        if (checkbox.checked) {
          const category = checkbox.getAttribute('data-category');
          if (!filterValues[category]) {
            filterValues[category] = [];
          }
          filterValues[category].push(checkbox.name);
        }
      });

      // Set the filter parameters in the URL
      for (const [category, values] of Object.entries(filterValues)) {
        if (values.length > 0) {
          params.set(category, values.join(','));
        }
      }

      // Update the URL with the new parameters
      url.search = params.toString();
      window.history.replaceState(null, null, url.toString());
    }
  });
</script>

<!-- {% for product in products %}
<h1>{{{product.name}}}</h1>
<img src="{{{product.thumb}}}" alt="{{{product.name}}}">
<div>
	{{{product.short}}}
</div>
<span>{{{product.price}}}</span>
{% endfor %} -->